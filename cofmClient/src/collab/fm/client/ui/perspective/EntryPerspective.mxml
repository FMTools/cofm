<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:v="collab.fm.client.ui.view.*" 
	horizontalAlign="center" verticalAlign="middle"
	creationComplete="initView()">
	
	<mx:states>
	    <mx:State name="">
	    	<mx:SetProperty target="{conDlg}" name="includeInLayout" value="true" />
	    	<mx:SetProperty target="{conDlg}" name="visible" value="true" />
	    	<mx:SetProperty target="{mdList}" name="includeInLayout" value="false" />
	    	<mx:SetProperty target="{mdList}" name="visible" value="false" />
	    </mx:State>
		<mx:State name="Working">
			<mx:SetProperty target="{conDlg}" name="includeInLayout" value="false" />
	    	<mx:SetProperty target="{conDlg}" name="visible" value="false" />
	    	<mx:SetProperty target="{mdList}" name="includeInLayout" value="true" />
	    	<mx:SetProperty target="{mdList}" name="visible" value="true" />
		</mx:State>
	</mx:states>
	
	<v:ConnectDlg id="conDlg" width="300" height="150"/>
	<v:ModelList id="mdList" includeInLayout="false" visible="false" width="100%" height="100%"/>
	<v:LoginRegisterForm id="logReg" />
	
	<!-- When connected, hide the connect dlg show a Login View by default. (in the right side)
	In the left side, show a ModelList View, when user has logined, hide the Login View and maxmize
	the ModelList view.
	  
	 -->
	 
	 <mx:Script>
	 	<![CDATA[
	 		import collab.fm.client.event.*;
	 		
	 		private var _lastState: String;
	 		
	 		public function get lastState(): String {
	 			return _lastState;
	 		}
	 		
	 		public function set lastState(s: String): void {
	 			_lastState = s;
	 		}
	 		
	 		private function changeStateTo(s: String): void {
	 			this.lastState = this.currentState;
	 			this.currentState = s;
	 		}
	 		
	 		private function initView(): void {
	 			this.currentState = "";
	 			this.addEventListener(ClientEvent.CONNECT_SUCCESS, onConnected);
	 			trace("Entry Perspective inited.");
	 		}
	 		
	 		private function onConnected(evt: ClientEvent): void {
	 			trace("Entry: Connection success event received.");
	 			changeStateTo("Working");		
	 		}
	 	]]>
	 </mx:Script>
</mx:HBox>
