<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
	minWidth="300" minHeight="80" 
	creationComplete="initView()">
	<!--
	    NOTE: do not use extra data binding here.
	      
	    Rendered as:
	    |       |  Name (big, bold, color)
	    | image |  Contributor(s):
	    |       |  Description
	-->
	<mx:Image width="50" height="50" source="{imgCls}" />
	<mx:VBox>
		<mx:Label text="{info.name}" fontWeight="bold" fontSize="12"/>
		<mx:HBox verticalAlign="top">
			<mx:Label text="{RS.M_LIST_USERS}"/>
			<mx:Repeater id="rep" dataProvider="{info.users}" count="{MAX_DISPLAYED_USER_COUNT}">
				<mx:Label text="{rep.currentItem}" />
			</mx:Repeater>	
			<mx:Label id="userAppender" />
		</mx:HBox>
		<mx:Text text="{info.des}" textIndent="25"/>		
	</mx:VBox>

	<mx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import collab.fm.client.data.ModelInfo;
			import collab.fm.client.data.Model;
			import mx.collections.XMLListCollection;
			
			import collab.fm.client.util.RS;
			
			[Embed(source="structure.png")]
            [Bindable]
            private var imgCls:Class;
            
            [Bindable]
            private var info: ModelInfo;
            private static const MAX_DISPLAYED_USER_COUNT: int = 2; // how many users we should display
            
            
            private function initView(): void {
            	info = new ModelInfo(int(data.@id));
            	
            	var actualUserCount: int = XMLList(data.users.user).length();
            	if (actualUserCount > MAX_DISPLAYED_USER_COUNT) {
            		userAppender.text = "...(and " + (actualUserCount - MAX_DISPLAYED_USER_COUNT) + " more)";
            	} else {
            		userAppender.parent.removeChild(userAppender);
            	}
            }

		]]>
	</mx:Script>
</mx:HBox>
