<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
			   creationComplete="initApp();">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import mx.controls.Alert;
			
			private static const PARAM_USERNAME: String = "u";
			private static const PARAM_MODEL_ID: String = "m";
			
			private var username: String;
			private var modelId: int;
			
			private function initApp(): void {
				// Get the "?..." string in the url 
				var searchStr: String = ExternalInterface.call("document.location.search.toString");
				if (searchStr == null) {
					return;
				}
				// Skip the "?"
				searchStr = searchStr.substring(1, searchStr.length);
				// Get parameters
				var params: Array = searchStr.split("&");
				
				for each (var param: Object in params) {
					var parts: Array = String(param).split("=");
					if (String(parts[0]) == PARAM_USERNAME) {
						username = String(parts[1]); 
					} else if (String(parts[0]) == PARAM_MODEL_ID) {
						modelId = int(parts[1]);
					}
				}
				
				//Alert.show("User=" + username + ", ID=" + modelId, "");
			}
		]]>
	</fx:Script>
</s:Application>
